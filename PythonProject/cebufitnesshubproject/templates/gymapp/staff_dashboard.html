{% load static %}
{% load humanize %} 
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Cebu Fitness Hub • Staff Dashboard</title>
  <link rel="icon" href="{% static 'gymapp/img/cebufitnesshub_logo.svg' %}" type="image/svg+xml">
  <link rel="stylesheet" href="{% static 'gymapp/css/staff_dashboard.css' %}">
</head>
<body data-enable-anchor-loader="true" data-use-logout-modal="true">
  {% csrf_token %} 
  <header class="site-header">
    <div class="brand">
      <img src="{% static 'gymapp/img/cebufitnesshub_logo.png' %}" alt="Cebu Fitness Hub" class="logo">
      <div class="logo-text">
        <div class="cebu-reg">CEBU</div>
        <div class="fitness-hub-reg">FITNESS HUB</div>
      </div>
    </div>
    <div class="header-right">
      <div class="user-info">
        <span class="user-icon" aria-hidden="true">
          <svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" width="20" fill="#6BCB3D"><path d="M40-160v-112q0-34 17.5-62.5T104-378q62-31 126-46.5T360-440q66 0 130 15.5T616-378q29 15 46.5 43.5T680-272v112H40Zm720 0v-120q0-44-24.5-84.5T666-434q51 6 96 20.5t84 35.5q36 20 55 44.5t19 53.5v120H760ZM360-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47Zm400-160q0 66-47 113t-113 47q-11 0-28-2.5t-28-5.5q27-32 41.5-71t14.5-81q0-42-14.5-81T544-792q14-5 28-6.5t28-1.5q66 0 113 47t47 113Z"/></svg>
        </span>
        <span class="user-name">{{ staff_user.get_full_name|default:"Test Staff" }}</span>
      </div>
    </div>
  </header>

  <div class="sidebar-bg-fix"></div>

  <div class="layout">
    <aside class="sidebar">
      <h3 class="sidebar-title">STAFF DASHBOARD</h3>
      <nav class="side-nav">
        <a href="#overview-section" class="nav-item active">Overview</a>
        <a href="#approvals" class="nav-item">Approval Queue</a>
        <a href="#members" class="nav-item">Member Management</a>
        <a href="#revenue" class="nav-item">Revenue Tracker</a>
        <a href="#notifications" class="nav-item">Notifications</a>
        <a href="{% url 'staff_settings' %}" class="nav-item">Settings</a>
        <a href="{% url 'staff_schedule' %}" class="nav-item">Schedule</a>
        <a href="{% url 'logout' %}" class="nav-item" aria-label="Logout" id="logoutBtn">Logout</a>
      </nav>
    </aside>

    <main class="main">
      <section id="overview-section" class="header-section"> <div class="welcome-left">
          <h2 class="welcome-text">Welcome back,<br> {{ staff_user.first_name }}!</h2>
        </div>
        <div class="overview-right">
          <h1 class="overview-title">STAFF OVERVIEW</h1>
          <p class="subtext">Here’s a snapshot of today’s performance and necessary actions!</p>
        </div>
      </section>

      <section class="info-cards">
        <div class="card">
          <div class="card-icon">
            <svg xmlns="http://www.w3.org/2000/svg" height="32" viewBox="0 -960 960 960" width="32" fill="#6BCB3D"><path d="M200-200h560v-560H200v560Zm-80 80v-720h720v720H120Zm160-160h80v-240h-80v240Zm160 0h80v-400h-80v400Zm160 0h80v-160h-80v160Z"/></svg>
          </div>
          <div class="card-content">
            <div class="card-title">Pending Approvals</div>
            <div class="card-value">{{ pending_approvals }}</div>
          </div>
        </div>
        <div class="card">
          <div class="card-icon">
            <span class="mmr-icon" aria-hidden="true"></span>
          </div>
          <div class="card-content">
            <div class="card-title">MRR</div>
            <div class="card-value">₱{{ mrr|floatformat:2|intcomma }}</div>
          </div>
        </div>
        <div class="card">
          <div class="card-icon">
            <svg xmlns="http://www.w3.org/2000/svg" height="32" viewBox="0 -960 960 960" width="32" fill="#6BCB3D"><path d="M120-160v-80h720v80H120Zm120-160v-400q0-33 23.5-56.5T320-800h320q33 0 56.5 23.5T720-720v400H240Zm80-80h320v-320H320v320Z"/></svg>
          </div>
          <div class="card-content">
            <div class="card-title">Active Members</div>
            <div class="card-value">{{ active_members }}</div>
          </div>
        </div>
        <div class="card">
          <div class="card-icon">
            <svg xmlns="http://www.w3.org/2000/svg" height="32" viewBox="0 -960 960 960" width="32" fill="#6BCB3D"><path d="M120-720h80v-80h80v80h400v-80h80v80h80q33 0 56.5 23.5T920-640v400q0 33-23.5 56.5T840-160H120q-33 0-56.5-23.5T40-240v-400q0-33 23.5-56.5T120-720Zm0 160h720v-80H120v80Zm0 240h720v-160H120v160Z"/></svg>
          </div>
          <div class="card-content">
            <div class="card-title">Today’s Revenue</div>
            <div class="card-value">₱{{ todays_revenue|floatformat:2|intcomma }}</div>
          </div>
        </div>
      </section>

      <section id="approvals" class="content-box approvals-box" data-section="approvals">
        <div class="box-header">
          <div class="box-icon">
            <svg xmlns="http://www.w3.org/2000/svg" height="28" viewBox="0 -960 960 960" width="28" fill="#8d8d8d"><path d="M360-120 160-320l56-56 144 144 384-384 56 56-440 440Z"/></svg>
          </div>
          <h2 class="box-title">Approval Queue</h2>
          <div class="title-divider"></div>
        </div>
        <div class="table-wrap" role="region" aria-live="polite">
          <table class="table approval-table">
            <thead>
              <tr>
                <th>Request Type</th>
                <th>Member Name</th>
                <th>Submitted Date</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody id="approval-queue-tbody">
              
              {% for request in approval_requests %}
              <tr data-request-id="{{ request.request_id }}">
                <td><span class="request-type-badge">{{ request.get_request_type_display }}</span></td>
                <td>{{ request.member.user.get_full_name }}</td>
                <td>{{ request.request_date|date:"Y-m-d" }}</td>
                <td>
                  <button class="action-btn" type="button" aria-label="View details"
                          data-request-id="{{ request.request_id }}"
                          data-reason="{{ request.reason|default:'No reason provided.' }}"
                          data-member-name="{{ request.member.user.get_full_name }}"
                          data-request-type="{{ request.request_type }}">
                    <svg xmlns="http://www.w3.org/2000/svg" height="16" viewBox="0 -960 960 960" width="16" fill="currentColor">
                      <path d="M504-480 320-664l56-56 240 240-240 240-56-56 184-184Z"/>
                    </svg>
                  </button>
                </td>
              </tr>
              {% endfor %}

            </tbody>
          </table>
          
          {% if not approval_requests %}
          <div class="approval-empty-message" id="approval-empty">
            No pending approval requests.
          </div>
          {% endif %}
          
        </div>
      </section>

      <section id="revenue" class="content-box revenue-box" data-section="revenue">
        <div class="box-header">
          <div class="box-icon">
            <svg xmlns="http://www.w3.org/2000/svg" height="28" viewBox="0 -960 960 960" width="28" fill="#8d8d8d"><path d="M120-160v-80h720v80H120Zm80-160v-400q0-33 23.5-56.5T280-800h400q33 0 56.5 23.5T760-720v400H200Zm80-80h400v-320H280v320Z"/></svg>
          </div>
          <h2 class="box-title">Revenue Tracker</h2>
          <div class="title-divider"></div>
        </div>
        <div class="revenue-grid">
          <!--KPIs Start-->
          <div class="revenue-cards">

            <div class="mini-card">
              <div class="mini-card-header">
                <span class="mini-card-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" width="20" fill="currentColor">
                    <path d="M200-80q-33 0-56.5-23.5T120-160v-560q0-33 23.5-56.5T200-800h40v-80h80v80h320v-80h80v80h40q33 0 56.5 23.5T840-720v560q0 33-23.5 56.5T760-80H200Zm0-80h560v-400H200v400Z"/>
                  </svg>
                </span>
                <span class="mini-card-label">TODAY</span>
              </div>
              <div class="mini-card-value">₱{{ todays_revenue|floatformat:2|intcomma }}</div>
            </div>
          
            <div class="mini-card">
              <div class="mini-card-header">
                <span class="mini-card-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" width="20" fill="currentColor">
                    <path d="M480-80q-33 0-56.5-23.5T400-160v-480h160v480q0 33-23.5 56.5T480-80ZM200-240q-33 0-56.5-23.5T120-320v-320q0-33 23.5-56.5T200-720h120v-80h80v80h160v-80h80v80h120q33 0 56.5 23.5T840-640v320q0 33-23.5 56.5T760-240H200Z"/>
                  </svg>
                </span>
                <span class="mini-card-label">THIS MONTH</span>
              </div>
              <div class="mini-card-value">₱{{ monthly_revenue|floatformat:2|intcomma }}</div>
            </div>
          
            <div class="mini-card">
              <div class="mini-card-header">
                <span class="mini-card-icon">
                  <span class="mmr-icon mmr-mini-icon" aria-hidden="true"></span>
                </span>
                <span class="mini-card-label">MRR</span>
              </div>
              <div class="mini-card-value">₱{{ mrr|floatformat:2|intcomma }}</div>
            </div>
          
          </div>          
          <!--End of KPIs-->
          <!--Start of chart-->
          <div class="revenue-chart-widget">
            <div class="widget-header">
              <h3 class="widget-title" id="revenue-chart-title">Revenue</h3>
              <div class="chart-filters">
                <button type="button" class="chart-filter-btn active" data-filter="daily">This Month</button>
                <button type="button" class="chart-filter-btn" data-filter="monthly">This Year</button>
              </div>
            </div>
          
            <div class="widget-content">
              <div class="chart-canvas-container">
                <canvas id="revenueChart"></canvas>
              </div>
            </div>
          </div>
          <!--End of the chart-->
        </div>
        <div class="table-wrap">
          <table class="table compact">
            <thead>
              <tr>
                <th>Receipt #</th>
                <th>Member</th>
                <th>Amount</th>
                <th>Method/Description</th>
                <th>Date</th>
              </tr>
            </thead>
            <tbody>
              
              {% for tx in revenue_transactions %}
              <tr>
                <td>{{ tx.billing_id }}</td>
                <td>{{ tx.member.user.get_full_name }}</td>
                <td>₱{{ tx.amount|floatformat:2|intcomma|slice:"1:" }}</td> <td>{{ tx.description|default:"N/A" }}</td>
                <td>{{ tx.timestamp|date:"Y-m-d, g:i A" }}</td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="5" style="text-align: center;">No payments recorded yet.</td>
              </tr>
              {% endfor %}
              
            </tbody>
          </table>
        </div>
      </section>

      <section id="members" class="content-box members-box" data-section="members">
        <div class="box-header">
          <div class="box-icon">
            <svg xmlns="http://www.w3.org/2000/svg" height="28" viewBox="0 -960 960 960" width="28" fill="#8d8d8d"><path d="M520-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47ZM160-160v-120q0-45 23.5-82.5T244-418q73-37 149.5-49.5T540-480q76 0 152 12.5T842-418q37 19 60.5 56.5T926-279v119H160Z"/></svg>
          </div>
          <h2 class="box-title">Member Management</h2>
          <div class="title-divider"></div>
        </div>
        
        <div class="member-management-controls">
          <!--Search bar Start-->
          <form
            class="member-search-group"
            id="member-search-group"
            method="GET"
            action="#members"
          >
            <input
              type="search"
              class="input member-search-input"
              id="member-search-input"
              name="q"
              placeholder="Search by name, email, or ID..."
              value="{{ search_query|default:'' }}"
            />
            <button
              class="btn member-search-btn"
              type="submit"
              id="member-search-btn"
            >
              Search
            </button>
          </form>
          <!--Search bar end-->
        
          <div class="member-filter-group" id="member-filter-component">
            <button class="member-filter-trigger" type="button" aria-haspopup="true" aria-expanded="false"
                    aria-controls="member-filter-panel">
              <span id="member-filter-label">Active Members</span>
              <span class="filter-arrow" aria-hidden="true">▼</span>
            </button>
        
            <div class="filter-dropdown-panel" id="member-filter-panel" role="menu">
              <div class="dropdown-actions">
                <button type="button" class="dropdown-btn btn-positive" role="menuitem"
                        data-value="active" data-label="Active Members">
                  Active Members
                </button>
                <button type="button" class="dropdown-btn btn-positive" role="menuitem"
                        data-value="pending" data-label="Pending Activation">
                  Pending Activation
                </button>
                <button type="button" class="dropdown-btn btn-positive" role="menuitem"
                        data-value="frozen" data-label="Frozen Accounts">
                  Frozen Accounts
                </button>
              </div>
            </div>
          </div>
        </div>
        
        <div class="table-wrap">
          <table class="table member-table">
            <thead>
              <tr>
                <th>Name</th>
                <th>Status</th>
                <th>Plan</th>
                <th>Last Check-in</th>
                <th>Balance Owed</th> <th>Actions</th>
              </tr>
            </thead>

            <tbody id="member-management-tbody" data-filter="active" style="display: table-row-group;">
              {% for data in active_member_list %}
                <tr data-member-id="{{ data.member.user.pk }}" 
                    data-checkin-status="{% if data.is_checked_in %}checked-in{% else %}checked-out{% endif %}"
                    data-member-name="{{ data.member.user.get_full_name }}"
                    data-member-email="{{ data.member.user.email }}"
                    data-contact-number="{{ data.member.user.contact_number|default:'' }}"
                    data-e-name="{{ data.member.user.emergency_contact_name|default:'' }}"
                    data-e-contact="{{ data.member.user.emergency_contact_number|default:'' }}"
                    data-medical="{{ data.member.user.medical_conditions|default:'' }}"
                    data-goals="{{ data.member.user.fitness_goals|default:'' }}"
                    data-member-id-str="{{ data.member.membership_id|default:'N/A' }}"
                    data-date-joined="{{ data.member.user.date_joined|date:'Y-m-d' }}"
                    data-balance="{{ data.member.balance|floatformat:2|intcomma }}"
                    data-status-text="Active">
                
                  <td>{{ data.member.user.get_full_name }}</td>
                  <td><span class="badge success">Active</span></td>
                  <td>₱{{ settings.default_monthly_fee|floatformat:2|intcomma }}</td>
                  <td>{{ data.last_checkin_time|date:"M. d, g:i A"|default:"N/A" }}</td>
                  <td>₱{{ data.member.balance|floatformat:2|intcomma }}</td>
                  <td class="action-cell">
                    <div class="action-menu-wrapper">
                      <button class="action-menu-btn" type="button" aria-label="More options">
                        <span class="dot"></span><span class="dot"></span><span class="dot"></span>
                      </button>
                      <div class="action-dropdown" role="menu">
                        <div class="dropdown-connector" aria-hidden="true"></div>
                        <div class="dropdown-actions">
                          <button type="button" class="dropdown-btn btn-danger" role="menuitem">Log Payment</button>
                          <button type="button" class="dropdown-btn btn-positive" role="menuitem">View Details</button>
                          <button type="button" class="dropdown-btn btn-positive" role="menuitem">Freeze</button>
                          <button type="button" class="dropdown-btn btn-positive" role="menuitem">Check-in/out</button>
                        </div>
                      </div>
                    </div>
                  </td>
                </tr>
                {% empty %}
                <tr>
                  <td colspan="6" style="text-align: center; padding: 20px; color: #666;">
                    
                    {% if search_query %}
                      No active members found matching "{{ search_query }}".
                    {% else %}
                      No active members found.
                    {% endif %}
                    
                  </td>
                </tr>
                {% endfor %}
            </tbody>

            <tbody id="member-management-tbody-pending" data-filter="pending" style="display: none;">
              {% for member in pending_member_list %}
                <tr data-member-id="{{ member.user.pk }}"
                    data-member-name="{{ member.user.get_full_name }}"
                    data-default-fee="{{ member.monthly_fee|floatformat:2 }}">
                  <td>{{ member.user.get_full_name }}</td>
                  <td><span class="badge warning">Pending</span></td>
                  <td>₱{{ settings.default_monthly_fee|floatformat:2|intcomma }}</td>
                  <td>N/A</td>
                  <td>₱{{ member.balance|floatformat:2|intcomma }}</td>
                  <td class="action-cell">
                    <button class="btn activate-member-btn" type="button" aria-label="Activate Member">Activate Member</button>
                  </td>
                </tr>
              {% empty %}
                <tr><td colspan="6" style="text-align: center;">No pending members found.</td></tr>
              {% endfor %}
            </tbody>
            
            <tbody id="member-management-tbody-frozen" data-filter="frozen" style="display: none;">
              {% for data in frozen_member_list %}
                <tr data-member-id="{{ data.member.user.pk }}"
                    data-member-name="{{ data.member.user.get_full_name }}"
                    data-member-email="{{ data.member.user.email }}"
                    data-contact-number="{{ data.member.user.contact_number|default:'' }}"
                    data-e-name="{{ data.member.user.emergency_contact_name|default:'' }}"
                    data-e-contact="{{ data.member.user.emergency_contact_number|default:'' }}"
                    data-medical="{{ data.member.user.medical_conditions|default:'' }}"
                    data-goals="{{ data.member.user.fitness_goals|default:'' }}"
                    data-member-id-str="{{ data.member.membership_id|default:'N/A' }}"
                    data-date-joined="{{ data.member.user.date_joined|date:'Y-m-d' }}"
                    data-balance="{{ data.member.balance|floatformat:2|intcomma }}"
                    data-status-text="Frozen">
                  
                  <td>{{ data.member.user.get_full_name }}</td>
                  <td><span class="badge frozen">Frozen</span></td>
                  <td>₱{{ settings.default_monthly_fee|floatformat:2|intcomma }}</td>
                  <td>{{ data.last_checkin_time|date:"M. d, g:i A"|default:"N/A" }}</td>
                  <td>₱{{ data.member.balance|floatformat:2|intcomma }}</td>
                  <td class="action-cell">
                    <div class="action-menu-wrapper">
                      <button class="action-menu-btn" type="button" aria-label="More options">
                        <span class="dot"></span><span class="dot"></span><span class="dot"></span>
                      </button>
                      <div class="action-dropdown" role="menu">
                        <div class="dropdown-connector" aria-hidden="true"></div>
                        <div class="dropdown-actions">
                          <button type="button" class="dropdown-btn btn-danger" role="menuitem">Unfreeze</button>
                          <button type="button" class="dropdown-btn btn-positive" role="menuitem">View Details</button>
                        </div>
                      </div>
                    </div>
                  </td>
                </tr>
              {% empty %}
                <tr><td colspan="6" style="text-align: center;">No frozen members found.</td></tr>
              {% endfor %}
            </tbody>
          </table>
          
          <div class="member-empty-message" id="member-empty" style="display: none;">
            No members found.
          </div>
        </div>
      </section>

      <!--Notification Start-->
      <!-- ========================================================
     REPLACE your old <section> with this new version
     ======================================================== -->
      <section id="notifications" class="content-box notifications-box" data-section="notifications">
        <div class="box-header">
          <div class="box-icon">
            <svg xmlns="http://www.w3.org/2000/svg" height="28" viewBox="0 -960 960 960" width="28" fill="#8d8d8d"><path d="M480-80q-33 0-56.5-23.5T400-160h160q0 33-23.5 56.5T480-80ZM200-240v-80h80v-240q0-83 48-149t128-87v-24q0-17 11.5-28.5T496-860q17 0 28.5 11.5T536-820v24q80 21 128 87t48 149v240h80v80H200Z"/></svg>
          </div>
          <h2 class="box-title">Notifications</h2>
          <div class="title-divider"></div>
        </div>

        <!-- This 'notif-list' wrapper is the same -->
        <ul class="notif-list" aria-live="polite">

          {% for notif in notifications %}
            <!-- 
              This <li> is the new "chip".
              We add dynamic classes for styling based on status.
            -->
            <li class="notif-item 
                {% if notif.is_read %}is-read{% endif %}
                {% if notif.notification_type == 'NEW_REQUEST' or notif.notification_type == 'NEW_REGISTRATION' %}
                    notif-item--warning
                {% else %}
                    notif-item--neutral
                {% endif %}
              ">
              <a href="{% url 'mark_notification_read' notif.notification_id %}" class="notif-link">
                
                <div class="notif-content">
                  <span class="notif-prefix">
                    {% if notif.notification_type == 'NEW_REQUEST' %}
                      Request:
                    {% elif notif.notification_type == 'NEW_REGISTRATION' %}
                      New Member: 
                    {% else %}
                      System:
                    {% endif %}
                  </span>
                  <span class="notif-message">{{ notif.message }}</span>
                </div>
                
                <time class="notif-time">{{ notif.timestamp|timesince }} ago</time>
              </a>
            </li>

            <!--End-->
          {% empty %}
            <li class="notif-item is-read">
              <a href="#" class="notif-link" style="pointer-events: none;">
                <div class="notif-content">
                  <span class="notif-prefix">System:</span>
                  <span class="notif-message">You have no unread notifications.</span>
                </div>
                <time class="notif-time">Just now</time>
              </a>
            </li>
          {% endfor %}

        </ul>
      </section>
      <!--End of the Notification-->

    </main>
  </div>

  <div id="modalLogout" class="modal" aria-hidden="true">
    <div class="modal-content modal-content--enhanced modal-content--small">
      <button class="modal-close-icon" data-close>&times;</button>
      <div class="modal-brand-header">
        <img src="{% static 'gymapp/img/cebufitnesshub_logo.png' %}" alt="Cebu Fitness Hub Logo" class="modal-brand-header__logo">
        <div class="modal-brand-header__text">
          <div class="modal-brand-header__line-1">CEBU</div>
          <div class="modal-brand-header__line-2">FITNESS HUB</div>
        </div>
      </div>
      <h3 class="modal-title--enhanced">
        Ready to <span class="modal-title-highlight">Logout?</span>
      </h3>
      <p class="modal-instruction">
        Confirm to securely end this staff session.
      </p>
      <div class="modal-action-buttons">
        <button type="button"
                class="modal-action-btn modal-btn-approve"
                id="btnConfirmLogout"
                data-logout-url="{% url 'logout' %}">
          Yes, Logout
        </button>
        <button type="button" class="modal-action-btn modal-btn-reject" data-close>
          Cancel
        </button>
      </div>
    </div>
  </div>

  <!--REQUEST ACCOUNT FREEZE-->
  <div id="modalApproval" class="modal" aria-hidden="true">
    <div class="modal-content modal-content--enhanced">
      <button class="modal-close-icon" data-close>&times;</button>
      <div class="modal-brand-header">
        <img src="{% static 'gymapp/img/cebufitnesshub_logo.png' %}" alt="Cebu Fitness Hub Logo" class="modal-brand-header__logo">
        <div class="modal-brand-header__text">
            <div class="modal-brand-header__line-1">CEBU</div>
            <div class="modal-brand-header__line-2">FITNESS HUB</div>
        </div>
      </div>
      <h3 class="modal-title--enhanced" id="approval-modal-title">
        Request Account <span class="modal-title-highlight">Freeze</span>
      </h3>
      <div class="modal-body--enhanced">
        <p class="modal-instruction">Reviewing request from <strong id="approval-member-name">Member</strong>.</p>
        <div class="approval-reason-group">
          <label for="approval-reason-text">Reason</label>
          <textarea id="approval-reason-text" readonly></textarea>
        </div>
        <div class="modal-action-buttons">
          <button type="button" class="modal-action-btn modal-btn-reject" id="btnReject">
            Reject Request
          </button>
          <button type="button" class="modal-action-btn modal-btn-approve" id="btnApprove">
            Approve Request
          </button>
        </div>
      </div>
    </div>
  </div>

  <!--LOG PAYMENT-->
  <div id="modalLogPayment" class="modal" aria-hidden="true">
    <div class="modal-content modal-content--enhanced">
      <button class="modal-close-icon" data-close>&times;</button>
      <div class="modal-brand-header">
        <img src="{% static 'gymapp/img/cebufitnesshub_logo.png' %}" alt="Cebu Fitness Hub Logo" class="modal-brand-header__logo">
        <div class="modal-brand-header__text">
            <div class="modal-brand-header__line-1">CEBU</div>
            <div class="modal-brand-header__line-2">FITNESS HUB</div>
        </div>
      </div>
      <h3 class="modal-title--enhanced">
        Log <span class="modal-title-highlight">Payment</span>
      </h3>
      <div class="modal-body--enhanced">
        <form class="modal-form--enhanced" id="log-payment-form">
          <div class="form-group">
            <label for="log-member-name">Member</label>
            <input type="text" id="log-member-name" readonly />
          </div>
          <div class="form-group">
            <label for="log-payment-amount">Amount</label>
            <div class="input-with-symbol">
              <span class="currency-symbol">₱</span>
              <input type="text" inputmode="decimal" id="log-payment-amount" placeholder="0.00"/>
            </div>
          </div>
          <div class="form-group">
            <label for="log-payment-description">Description / Method</label>
            <textarea id="log-payment-description" placeholder="e.g., Cash Payment - November Dues" rows="3"></textarea>
          </div>
        </form>
        <div class="modal-action-buttons">
          <button type="button" class="modal-action-btn modal-btn-approve" id="btnConfirmPayment">
            Confirm Payment
          </button>
          <button type="button" class="modal-action-btn modal-btn-reject" data-close>
            Cancel
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <!--NO BALANCE MODAL-->
  <div id="modalNoBalance" class="modal" aria-hidden="true">
    <div class="modal-content modal-content--enhanced modal-content--small">
      <button class="modal-close-icon" data-close>&times;</button>
      <div class="modal-brand-header">
        <img src="{% static 'gymapp/img/cebufitnesshub_logo.png' %}" alt="Cebu Fitness Hub Logo" class="modal-brand-header__logo">
        <div class="modal-brand-header__text">
          <div class="modal-brand-header__line-1">CEBU</div>
          <div class="modal-brand-header__line-2">FITNESS HUB</div>
        </div>
      </div>
      <h3 class="modal-title--enhanced">
        No Balance to <span class="modal-title-highlight">Log</span>
      </h3>
      <p class="modal-instruction">
        This member currently has no outstanding balance. Payments can only be recorded when there is an amount due.
      </p>
      <div class="modal-action-buttons">
        <button type="button" class="modal-action-btn modal-btn-approve" data-close>
          Okay
        </button>
      </div>
    </div>
  </div>
    
  <!--VIEW DETAILS-->
  <div id="modalViewDetails" class="modal" aria-hidden="true">
    <div class="modal-content modal-content--enhanced modal-content--large" id="modalViewDetailsContent" data-active-tab="member">
      <button class="modal-close-icon" data-close>&times;</button>
      <div class="modal-brand-header">
        <img src="{% static 'gymapp/img/cebufitnesshub_logo.png' %}" alt="Cebu Fitness Hub Logo" class="modal-brand-header__logo">
        <div class="modal-brand-header__text">
          <div class="modal-brand-header__line-1">CEBU</div>
          <div class="modal-brand-header__line-2">FITNESS HUB</div>
        </div>
      </div>
      
      <h3 class="modal-title--enhanced modal-title-view">
        Member <span class="modal-title-highlight">Details</span>
      </h3>
      <h3 class="modal-title--enhanced modal-title-edit">
        Edit <span class="modal-title-highlight">Details</span>
      </h3>
      
      <nav class="modal-tab-nav">
        <button type="button" class="modal-tab-btn is-active" data-tab="member" role="tab" aria-selected="true">
          Member & Account
        </button>
        <button type="button" class="modal-tab-btn" data-tab="profile" role="tab" aria-selected="false" tabindex="-1">
          Profile & Emergency
        </button>
      </nav>
      
      <div class="modal-body--enhanced">
        <form class="modal-form--enhanced" id="member-details-form">
          
          <div class="modal-tab-pane is-active" id="tab-member" role="tabpanel">
            <div class="modal-grid">
              <div class="form-group">
                <label for="edit-first-name">First Name <span class="required-asterisk">*</span></label>
                <p class="form-view-field" id="view-first-name"></p>
                <input type="text" class="form-edit-field" id="edit-first-name" />
              </div>
              <div class="form-group">
                <label for="edit-last-name">Last Name <span class="required-asterisk">*</span></label>
                <p class="form-view-field" id="view-last-name"></p>
                <input type="text" class="form-edit-field" id="edit-last-name" />
              </div>
              <div class="form-group">
                <label for="edit-email">Email</label>
                <p class="form-view-field" id="view-email"></p>
                <input type="email" class="form-edit-field" id="edit-email" disabled />
              </div>
              <div class="form-group">
                <label for="edit-member-id">Member ID</label>
                <input type="text" id="edit-member-id" disabled />
              </div>
              <div class="form-group">
                <label for="edit-contact">Contact Number <span class="required-asterisk">*</span></label>
                <p class="form-view-field" id="view-contact"></p>
                <input type="text" class="form-edit-field" id="edit-contact" />
              </div>
              <div class="form-group">
                <label for="edit-date-joined">Date Joined</label>
                <input type="text" id="edit-date-joined" disabled />
              </div>
            </div>
      
            <div class="modal-grid">
              <div class="form-group">
                <label for="edit-status">Current Status</label>
                <input type="text" id="edit-status" disabled />
              </div>
              <div class="form-group">
                <label for="edit-balance">Balance Owed</label>
                <input type="text" id="edit-balance" disabled />
              </div>
            </div>
          </div>
      
          <div class="modal-tab-pane" id="tab-profile" role="tabpanel">
            <div class="modal-grid">
              <div class="form-group">
                <label for="edit-e-name">Emergency Contact Name <span class="required-asterisk">*</span></label>
                <p class="form-view-field" id="view-e-name"></p>
                <input type="text" class="form-edit-field" id="edit-e-name" />
              </div>
              <div class="form-group">
                <label for="edit-e-contact">Emergency Contact No. <span class="required-asterisk">*</span></label>
                <p class="form-view-field" id="view-e-contact"></p>
                <input type="text" class="form-edit-field" id="edit-e-contact" />
              </div>
            </div>
      
            <div class="modal-grid">
              <div class="form-group grid-span-2">
                <label for="edit-medical">Medical Conditions</label>
                <p class="form-view-field is-textarea" id="view-medical"></p>
                <textarea class="form-edit-field" id="edit-medical" rows="3"></textarea>
              </div>
              <div class="form-group grid-span-2">
                <label for="edit-goals">Fitness Goals</label>
                <p class="form-view-field is-textarea" id="view-goals"></p>
                <textarea class="form-edit-field" id="edit-goals" rows="3"></textarea>
              </div>
            </div>
          </div>
        </form>
      
        <div class="modal-action-buttons modal-actions-view">
          <button type="button" class="modal-action-btn modal-btn-approve" id="btnEditProfile">
            Edit Profile
          </button>
          <button type="button" class="modal-action-btn modal-btn-reject" data-close>
            Close
          </button>
        </div>
      
        <div class="modal-action-buttons modal-actions-edit">
          <button type="button" class="modal-action-btn modal-btn-approve" id="btnSaveChanges">
            Save Changes
          </button>
          <button type="button" class="modal-action-btn modal-btn-reject" id="btnCancelEdit">
            Cancel
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <div id="modalFreezeAccount" class="modal" aria-hidden="true">
    <div class="modal-content modal-content--enhanced">
      <button class="modal-close-icon" data-close>&times;</button>
      <div class="modal-brand-header">
        <img src="{% static 'gymapp/img/cebufitnesshub_logo.png' %}" alt="Cebu Fitness Hub Logo" class="modal-brand-header__logo">
        <div class="modal-brand-header__text">
            <div class="modal-brand-header__line-1">CEBU</div>
            <div class="modal-brand-header__line-2">FITNESS HUB</div>
        </div>
      </div>
      <h3 class="modal-title--enhanced">
        Manually <span class="modal-title-highlight">Freeze</span> Member Account
      </h3>
      <div class="modal-body--enhanced">
        <p class="modal-instruction">
          Are you sure you want to manually freeze this
          <br>
          <span class="modal-note-reject">account?</span>
        </p>
        <form class="modal-form--enhanced" id="freeze-account-form">
          <div class="form-group">
            <label for="freeze-member-name">Member</label>
            <input type="text" id="freeze-member-name" disabled />
          </div>
          <div class="form-group">
            <label for="freeze-reason">Reason for Manual Freeze</label>
            <textarea id="freeze-reason" placeholder="Enter justification for manual freeze..." rows="3"></textarea>
          </div>
        </form>
        <div class="modal-action-buttons">
          <button type="button" class="modal-action-btn modal-btn-approve" id="btnConfirmFreeze">
            Confirm Freeze
          </button>
          <button type="button" class="modal-action-btn modal-btn-reject" data-close>
            Cancel
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <div id="modalCheckInOut" class="modal" aria-hidden="true">
    <div class="modal-content modal-content--enhanced">
      <button class="modal-close-icon" data-close>&times;</button>
      <div class="modal-brand-header">
        <img src="{% static 'gymapp/img/cebufitnesshub_logo.png' %}" alt="Cebu Fitness Hub Logo" class="modal-brand-header__logo">
        <div class="modal-brand-header__text">
            <div class="modal-brand-header__line-1">CEBU</div>
            <div class="modal-brand-header__line-2">FITNESS HUB</div>
        </div>
      </div>
      <h3 class="modal-title--enhanced">
        Member
        <span class="modal-title-highlight">Check-In</span> /
        <span class="modal-title-highlight--red">Check-Out</span>
      </h3>
      <div class="modal-body--enhanced">
        <form class="modal-form--enhanced" id="checkin-out-form">
          <div class="form-group">
            <label for="checkin-member-name">Member</label>
            <input type="text" id="checkin-member-name" disabled />
          </div>
          <div class="form-group">
            <label for="checkin-member-status">Current Status</label>
            <input type="text" id="checkin-member-status" disabled />
          </div>
        </form>
        <div class="modal-action-buttons">
          <button type="button" class="modal-action-btn" id="btnConfirmCheckInOut">
            </button>
        </div>
      </div>
    </div>
  </div>

  <div id="modalUnfreezeAccount" class="modal" aria-hidden="true">
    <div class="modal-content modal-content--enhanced modal-content--medium">
      <button class="modal-close-icon" data-close>&times;</button>
      <div class="modal-brand-header">
        <img src="{% static 'gymapp/img/cebufitnesshub_logo.png' %}" alt="Cebu Fitness Hub Logo" class="modal-brand-header__logo">
        <div class="modal-brand-header__text">
            <div class="modal-brand-header__line-1">CEBU</div>
            <div class="modal-brand-header__line-2">FITNESS HUB</div>
        </div>
      </div>
      <h3 class="modal-title--enhanced">
        Manually <span class="modal-title-highlight">Unfreeze</span> Member Account
      </h3>
      <div class="modal-body--enhanced">
        <p class="modal-instruction">
          Are you sure you want to manually unfreeze this <br>
          <span class="modal-note-reject">account?</span>
        </p>
        <form class="modal-form--enhanced" id="unfreeze-account-form">
          <div class="form-group">
            <label for="unfreeze-member-name">Member</label>
            <input type="text" id="unfreeze-member-name" disabled />
          </div>
          <div class="form-group">
            <label for="unfreeze-reason">Reason for Manual Unfreeze</label>
            <textarea id="unfreeze-reason" placeholder="Enter justification for manual unfreeze..." rows="3"></textarea>
          </div>
        </form>
        <div class="modal-action-buttons">
          <button type="button" class="modal-action-btn modal-btn-approve" id="btnConfirmUnfreeze">
            Confirm Unfreeze
          </button>
          <button type="button" class="modal-action-btn modal-btn-reject" data-close>
            Cancel
          </button>
        </div>
      </div>
    </div>
  </div>

  <div id="modalActivateMembership" class="modal" aria-hidden="true">
    <div class="modal-content modal-content--enhanced">
      <button class="modal-close-icon" data-close>&times;</button>
      <div class="modal-brand-header">
        <img src="{% static 'gymapp/img/cebufitnesshub_logo.png' %}" alt="Cebu Fitness Hub Logo" class="modal-brand-header__logo">
        <div class="modal-brand-header__text">
            <div class="modal-brand-header__line-1">CEBU</div>
            <div class="modal-brand-header__line-2">FITNESS HUB</div>
        </div>
      </div>
      <h3 class="modal-title--enhanced">
        Activate <span class="modal-title-highlight">Membership</span>
      </h3>
      <div class="modal-body--enhanced">
        <form class="modal-form--enhanced" id="activate-member-form">
          <div class="form-group">
            <label for="activate-member-name">Member</LabeL>
            <input type="text" id="activate-member-name" readonly />
          </div>
          <div class="form-group">
            <label for="activate-amount">Downpayment Amount</label>
            <div class="input-with-symbol">
              <span class="currency-symbol">₱</span>
              <input type="text" id="activate-amount" inputmode="decimal" placeholder="0.00" />
            </div>
          </div>
          <div class_form-group">
            <label for="activate-description">Description / Method</label>
            <textarea id="activate-description" rows="3" placeholder="e.g., Cash Payment - Initial Activation"></textarea>
          </div>
        </form>
        <div class="modal-action-buttons">
          <button type="button" class="modal-action-btn modal-btn-approve" id="btnConfirmActivation">
            Confirm Activation
          </button>
          <button type="button" class="modal-action-btn modal-btn-reject" data-close>
            Cancel
          </button>
        </div>
      </div>
    </div>
  </div>

  <!--For Chart-->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="{% static 'gymapp/js/dashboard.js' %}"></script>
  <script defer src="{% static 'gymapp/js/staff_dashboard.js' %}"></script>
</body>
</html>